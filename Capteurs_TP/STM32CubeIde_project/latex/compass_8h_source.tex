\doxysection{compass.\+h}
\hypertarget{compass_8h_source}{}\label{compass_8h_source}\index{Utils/Inc/compass.h@{Utils/Inc/compass.h}}
\mbox{\hyperlink{compass_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#ifndef\ COMPASS\_H}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#define\ COMPASS\_H}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <stddef.h>}\ \ \ \textcolor{comment}{//\ pour\ size\_t}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{main_8h}{main.h}}"{}}\ \ \ \ \ \textcolor{comment}{//\ pour\ types\ STM32}}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ \textcolor{comment}{//\ Structure\ pour\ stocker\ les\ offsets\ et\ gains}}
\DoxyCodeLine{00013\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\{}
\DoxyCodeLine{00014\ \ \ \ \ \textcolor{keywordtype}{double}\ offset[3];}
\DoxyCodeLine{00015\ \ \ \ \ \textcolor{keywordtype}{double}\ gain[3];}
\DoxyCodeLine{00016\ \}\ \mbox{\hyperlink{struct_compass_calib__t}{CompassCalib\_t}};}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#define\ PI\ 3.14}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{comment}{/*\ Déclarations\ des\ paramètres\ (définis\ dans\ compass.c)\ */}}
\DoxyCodeLine{00021\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{double}\ Te;\ \ \ \ \textcolor{comment}{//\ Période\ d'échantillonnage}}
\DoxyCodeLine{00022\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{double}\ tau;\ \ \ \textcolor{comment}{//\ Constante\ de\ temps}}
\DoxyCodeLine{00023\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{double}\ K;\ \ \ \ \ \textcolor{comment}{//\ Coefficient\ complémentaire\ Te)}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{comment}{/*\ Fonctions\ */}}
\DoxyCodeLine{00026\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{compass_8h_ada900bcedd721fd8ac19af9c901ff898}{CompassMeasureMsg}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ acc[3],\ \textcolor{keywordtype}{char}\ *msg,\ \textcolor{keywordtype}{size\_t}\ msg\_len,\ \mbox{\hyperlink{struct_compass_calib__t}{CompassCalib\_t}}\ *calib);}
\DoxyCodeLine{00027\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{compass_8h_a0149b346380f84a4e9c91eca7dc4c38a}{CompassCalibSinglePoint}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ acc[3],\ \mbox{\hyperlink{struct_compass_calib__t}{CompassCalib\_t}}\ *calib);}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \textcolor{comment}{/*\ Calculs\ de\ la\ boussole\ /\ inclinaison\ */}}
\DoxyCodeLine{00030\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{compass_8h_aaebabb58f38272b70c182194ab68ceb2}{TiltCompensatedCompass}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ acc[3],\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ mag[3],\ \textcolor{keywordtype}{double}\ *roll,\ \textcolor{keywordtype}{double}\ *pitch,\ \textcolor{keywordtype}{double}\ *heading);}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \textcolor{comment}{/*}}
\DoxyCodeLine{00033\ \textcolor{comment}{\ *\ Filtre\ complémentaire\ réel\ :\ fournit\ roll/pitch\ en\ utilisant\ acc\ +\ gyro}}
\DoxyCodeLine{00034\ \textcolor{comment}{\ *\ -\/\ gyro\_rates\ :\ tableau\ [gx,\ gy,\ gz]\ en\ deg/s\ (ou\ rad/s\ si\ tes\ lectures\ le\ sont\ —\ adapte\ si\ besoin)}}
\DoxyCodeLine{00035\ \textcolor{comment}{\ *\ -\/\ acc\ :\ accéléromètre\ calibré\ en\ g}}
\DoxyCodeLine{00036\ \textcolor{comment}{\ *\ -\/\ mag\ :\ magnétomètre\ calibré\ en\ µT\ (peut\ être\ NULL\ si\ on\ ne\ calcule\ pas\ heading\ ici)}}
\DoxyCodeLine{00037\ \textcolor{comment}{\ *\ Résultat\ :\ roll,\ pitch,\ heading\ (deg).\ Heading\ calculé\ via\ mag\ +\ compensation\ tilt.}}
\DoxyCodeLine{00038\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00039\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{compass_8h_a9de9be13b1e645650822466326783a14}{TiltCompensatedComplementary}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ acc[3],\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ gyro\_rates[3],\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ mag[3],}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ *roll,\ \textcolor{keywordtype}{double}\ *pitch,\ \textcolor{keywordtype}{double}\ *heading);}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00050\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{compass_8h_abbc9806afc9a6c4836f461b98f8801f1}{TiltCompensatedCompassAngles}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ acc[3],\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ mag[3],\ \textcolor{keywordtype}{double}\ *roll,\ \textcolor{keywordtype}{double}\ *pitch,\ \textcolor{keywordtype}{double}\ *heading);}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ COMPASS\_H\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00053\ }

\end{DoxyCode}
